{{template "_header.html" .}}
{{template "_sidebar.html" .}}

<style>
    /* Profil Card Style */
    .profile-card {
        background: #ffffff;
        border-top: 4px solid #4e73df; /* Aksen warna primary */
        box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.15);
        border-radius: 0.35rem;
        padding: 2.5rem 2rem;
        position: relative;
        overflow: visible; /* Agar foto bisa keluar */
        margin-top: 60px; /* Ruang untuk foto */
    }

    .profile-pic {
        width: 140px;
        height: 140px;
        object-fit: cover;
        border-radius: 50%;
        border: 5px solid #fff;
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        position: absolute;
        top: -70px; /* Geser ke atas agar setengah keluar */
        left: 50%;
        transform: translateX(-50%);
        background-color: #fff; /* Fallback jika gambar loading */
    }

    .social-links a {
        width: 40px;
        height: 40px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        margin: 0 8px;
        font-size: 1.2rem;
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Efek bounce */
        color: #fff;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .social-links a:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 10px rgba(0,0,0,0.2);
    }

    .btn-github { background-color: #333; }
    .btn-whatsapp { background-color: #25D366; }
    .btn-email { background-color: #ea4335; }

    /* Hardware ID Box */
    .hwid-box {
        background-color: #f8f9fc;
        border: 1px dashed #b7b9cc;
        border-radius: 0.35rem;
        padding: 1rem;
        position: relative;
    }
    .hwid-text {
        font-family: 'Courier New', Courier, monospace;
        letter-spacing: 1px;
        font-weight: 700;
        color: #4e73df;
        font-size: 1.2rem;
        word-break: break-all; /* Agar tidak overflow di mobile */
    }
</style>


<div id="content-wrapper" class="d-flex flex-column">
    <div id="content">
        {{template "_topbar.html" .}}
        <div class="container-fluid">

            <h1 class="h3 mb-4 text-gray-800">Tentang Aplikasi</h1>

            <div class="row">
                <div class="col-lg-7">
                    <div class="card shadow mb-4 border-left-primary">
                        <div class="card-header py-3">
                            <h6 class="m-0 font-weight-bold text-primary"><i class="fas fa-info-circle mr-2"></i>Informasi Sistem</h6>
                        </div>
                        <div class="card-body">
                            <div class="text-center mb-4">
                                <img class="img-fluid" style="width: 8rem;" src="/static/img/logo.png" alt="Logo Polri">
                                <h4 class="mt-3 font-weight-bold text-gray-800">SIMDOKPOL</h4>
                                <p class="text-muted mb-0">Sistem Informasi Manajemen Dokumen Kepolisian</p>
                                <span class="badge badge-primary px-3 py-2 mt-2">Versi {{if .AppVersion}}{{.AppVersion}}{{else}}dev{{end}}</span>
                            </div>
                            
                            <p class="text-justify">
                                SIMDOKPOL adalah solusi perangkat lunak modern yang dirancang khusus untuk meningkatkan efisiensi operasional unit pelayanan kepolisian. Aplikasi ini mengotomatisasi proses pembuatan, pengelolaan, dan pengarsipan Surat Keterangan Tanda Lapor Kehilangan (SKTLK), memastikan akurasi data dan kecepatan pelayanan kepada masyarakat.
                            </p>
                            
                            <div class="row mt-4">
                                <div class="col-md-6 mb-3">
                                    <h6 class="font-weight-bold text-primary">Fitur Utama</h6>
                                    <ul class="small text-gray-700 pl-3">
                                        <li>Manajemen Dokumen Terpusat</li>
                                        <li>Pencetakan PDF Presisi Tinggi</li>
                                        <li>Arsitektur Multi-Database (SQLite/MySQL)</li>
                                        <li>Sistem Keamanan & Audit Log</li>
                                        <li>Laporan Statistik Real-time</li>
                                    </ul>
                                </div>
                                <div class="col-md-6">
                                    <h6 class="font-weight-bold text-primary">Teknologi</h6>
                                    <ul class="small text-gray-700 pl-3">
                                        <li><strong>Backend:</strong> Golang (High Performance)</li>
                                        <li><strong>Database:</strong> GORM (ORM Layer)</li>
                                        <li><strong>Frontend:</strong> Bootstrap 4 & jQuery</li>
                                        <li><strong>Keamanan:</strong> HMAC Licensing & JWT</li>
                                    </ul>
                                </div>
                            </div>

                            <hr>
                            <div class="text-center small text-gray-500">
                                &copy; 2025 SIMDOKPOL. Hak Cipta Dilindungi Undang-Undang.
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-5">
                    
                    <div class="profile-card mb-4 text-center">
                        <img class="profile-pic" src="/static/img/panduan/profile-pic.png" alt="Foto Pengembang" onerror="this.src='/static/img/undraw_profile.svg'">
                        
                        <h4 class="mt-4 mb-1 font-weight-bold text-gray-800">MUHAMMAD YUSUF A.</h4>
                        <p class="text-primary font-weight-bold small mb-3">Fullstack Developer & System Architect</p>
                        
                        <p class="text-gray-600 small px-3">
                            "Berdedikasi untuk menciptakan solusi digital yang tidak hanya canggih secara teknis, tetapi juga memberikan dampak nyata bagi efisiensi pelayanan publik. SIMDOKPOL adalah wujud komitmen saya dalam mendukung modernisasi administrasi di Polsek Bahodopi."
                        </p>
                        
                        <div class="social-links mt-4">
                            <a href="https://github.com/muhammad1505" target="_blank" class="btn-github" title="GitHub">
                                <i class="fab fa-github"></i>
                            </a>
                            <a href="https://wa.me/6282300014685?text=Halo%20saya%20ingin%20bertanya%20tentang%20SIMDOKPOL" target="_blank" class="btn-whatsapp" title="WhatsApp">
                                <i class="fab fa-whatsapp"></i>
                            </a>
                            <a href="mailto:emailbaruku50@gmail.com" class="btn-email" title="Email">
                                <i class="fas fa-envelope"></i>
                            </a>
                        </div>
                    </div>

                    <div class="card shadow mb-4 border-bottom-primary">
                        <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                            <h6 class="m-0 font-weight-bold text-primary"><i class="fas fa-key mr-2"></i>Status Lisensi</h6>
                            <div id="license-status-text">
                                <span class="spinner-border spinner-border-sm text-primary" role="status"></span>
                            </div>
                        </div>
                        <div class="card-body">
                            
                            <div id="license-active-msg" style="display: none;" class="text-center py-3">
                                <div class="mb-3">
                                    <span class="fa-stack fa-3x text-success">
                                        <i class="fas fa-circle fa-stack-2x"></i>
                                        <i class="fas fa-check fa-stack-1x fa-inverse"></i>
                                    </span>
                                </div>
                                <h5 class="font-weight-bold text-gray-800">Versi Pro Aktif</h5>
                                <p class="text-gray-600 mb-0">Terima kasih atas dukungan Anda!</p>
                                <p class="small text-muted mt-1">Semua fitur premium telah terbuka.</p>
                            </div>

                            <div id="license-form-group" style="display: none;">
                                <div class="text-center mb-3">
                                    <span class="badge badge-secondary px-3 py-2">VERSI GRATIS</span>
                                </div>
                                
                                <div class="hwid-box mb-4 text-center">
                                    <small class="text-uppercase text-gray-500 font-weight-bold">Hardware ID Anda</small>
                                    <div class="d-flex justify-content-center align-items-center mt-2">
                                        <h4 class="hwid-text mb-0 mr-2" id="hardware-id-val">...</h4>
                                        <button class="btn btn-sm btn-outline-primary" id="copy-hwid-btn" type="button" title="Salin ID">
                                            <i class="fas fa-copy"></i>
                                        </button>
                                    </div>
                                    <small class="d-block mt-2 text-gray-500">ID ini digunakan untuk generate lisensi.</small>
                                </div>

                                <div class="text-center">
                                    <p class="small text-gray-600 mb-3">Ingin membuka semua fitur? Lakukan aktivasi sekarang.</p>
                                    <a href="/upgrade" class="btn btn-primary btn-block font-weight-bold shadow-sm">
                                        <i class="fas fa-rocket mr-2"></i> Upgrade ke Pro
                                    </a>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>
    {{template "_footer.html" .}}
</div>

{{template "_scripts.html" .}}
{{template "_licenseScript.html" .}}

<script>
// Script Khusus Halaman Tentang (Tombol Copy)
$(document).ready(function() {
    
    // --- FUNGSI UTAMA: COPY HWID DENGAN FALLBACK ---
    function copyToClipboard(text) {
        // Cara Modern (Hanya HTTPS/Localhost)
        if (navigator.clipboard && window.isSecureContext) {
            return navigator.clipboard.writeText(text);
        } else {
            // Cara Fallback (Aman untuk HTTP)
            let textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-9999px";
            textArea.style.top = "0";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            return new Promise((resolve, reject) => {
                try {
                    const successful = document.execCommand('copy');
                    document.body.removeChild(textArea);
                    if (successful) {
                        resolve();
                    } else {
                        reject(new Error("Gagal menyalin (execCommand false)"));
                    }
                } catch (err) {
                    document.body.removeChild(textArea);
                    reject(err);
                }
            });
        }
    }

    // --- EVENT LISTENER TOMBOL COPY ---
    $('#copy-hwid-btn').on('click', function() {
        const hwid = $('#hardware-id-val').text();
        if (hwid && hwid !== '...' && hwid !== 'ERROR') {
            copyToClipboard(hwid).then(function() {
                const $btn = $('#copy-hwid-btn');
                const originalHtml = $btn.html();
                
                $btn.html('<i class="fas fa-check"></i>').addClass('btn-success').removeClass('btn-outline-primary');
                
                setTimeout(function() {
                    $btn.html(originalHtml).removeClass('btn-success').addClass('btn-outline-primary');
                }, 2000);
                
                const Toast = Swal.mixin({
                    toast: true,
                    position: 'top-end',
                    showConfirmButton: false,
                    timer: 2000,
                    timerProgressBar: false,
                });
                Toast.fire({
                    icon: 'success',
                    title: 'Hardware ID disalin!'
                });
            }).catch(function(err) {
                console.error('Gagal menyalin:', err);
                Swal.fire({
                    icon: 'error',
                    title: 'Gagal Menyalin',
                    text: 'Silakan blok dan salin ID secara manual.',
                    footer: '<small>Tips: Gunakan HTTPS untuk fitur copy otomatis.</small>'
                });
            });
        }
    });
});
</script>