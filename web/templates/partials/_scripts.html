<a class="scroll-to-top rounded" href="#page-top"><i class="fas fa-angle-up"></i></a>

<div class="modal fade" id="changelogModal" tabindex="-1" role="dialog" aria-labelledby="changelogModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content border-0 shadow-lg">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title font-weight-bold" id="changelogModalLabel">
                    <i class="fas fa-rocket mr-2"></i> Catatan Rilis <span class="badge badge-light text-primary ml-2">v{{.AppVersion}}</span>
                </h5>
                <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body bg-light">
                <div style="font-family: 'Courier New', monospace; font-size: 0.9rem; line-height: 1.6; color: #2d3748; background-color: #ffffff; border: 1px solid #e3e6f0; border-radius: 0.5rem; padding: 1.5rem; max-height: 60vh; overflow-y: auto;">
                    {{ .AppChangelog }}
                </div>
            </div>
            <div class="modal-footer bg-light">
                <button type="button" id="btn-check-update-modal" class="btn btn-info btn-sm shadow-sm">
                    <i class="fas fa-sync-alt mr-1"></i> Cek Update
                </button>
                <button type="button" class="btn btn-secondary btn-sm shadow-sm" data-dismiss="modal">Tutup</button>
            </div>
        </div>
    </div>
</div>

<script src="/static/vendor/jquery/jquery.min.js"></script>
<script src="/static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/static/vendor/jquery-easing/jquery.easing.min.js"></script>
<script src="/static/js/sb-admin-2.min.js"></script>
<script src="/static/vendor/chart.js/Chart.min.js"></script>
<script src="/static/vendor/datatables/jquery.dataTables.min.js"></script>
<script src="/static/vendor/datatables/dataTables.bootstrap4.min.js"></script>
<script src="/static/vendor/sweetalert2/sweetalert2.all.min.js"></script>
<script src="/static/vendor/datepicker/js/bootstrap-datepicker.min.js"></script>
<script src="/static/vendor/datepicker/locales/bootstrap-datepicker.id.min.js"></script>
<script src="/static/vendor/select2/js/select2.min.js"></script>

<script>
$(document).ready(function() {
    function showPageLoader() {
        $('#page-loader').fadeIn(120);
    }

    $(window).on('load', function() {
        $('#page-loader').fadeOut(120);
    });

    $('body').on('click', 'a', function() {
        const $link = $(this);
        const href = $link.attr('href');
        if (!href || href === '#' || href.startsWith('javascript:')) {
            return;
        }
        if ($link.attr('target') === '_blank') {
            return;
        }
        if ($link.data('toggle') === 'collapse') {
            return;
        }
        if (href.startsWith('/')) {
            showPageLoader();
        }
    });

    // Logout
    $('#logout-btn').on('click', function(e) {
        e.preventDefault();
        $.ajax({ url: '/api/logout', type: 'POST', success: function() { window.location.href = '/login'; } });
    });

    // Password Peek
    $('body').on('click', '.password-peek', function() {
        const $peek = $(this);
        const target = $peek.data('target');
        const $input = target ? $(target) : $peek.siblings('input');
        if ($input.length === 0) {
            return;
        }
        const type = $input.attr('type') === 'password' ? 'text' : 'password';
        $input.attr('type', type);
        const $icon = $peek.is('i') ? $peek : $peek.find('i');
        if ($icon.length > 0) {
            $icon.toggleClass('fa-eye fa-eye-slash');
        }
    });
});
</script>

{{template "_updateScript.html" .}}
{{template "_notificationScript.html" .}}

</body>
</html>
